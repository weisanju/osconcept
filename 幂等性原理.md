# 概述

对同一个系统，使用同样的条件，一次请求和重复的多次请求对系统资源的影响是一致的

幂等有两个维度：一是空间维度上的幂等，即幂等对象的范围，是个人还是机构，是某一次交易还是某种类型的交易...

# 幂等性适用领域

电商支付，银行金融



# 解决办法

## MVCC

## 多版本并发控制

multiversion  concurent control  

启用版本号

## 去重表

建立唯一性索引

## TOKEN机制

为每一次操作生成一个唯一性凭证，

一个token在操作的每一个阶段只有一次执行权，一旦执行成功则保存执行结果。对重复的请求，返回同一个结果



服务端提供了发送token的接口。我们在分析业务的时候，哪些业务是存在幂等问题的

1. 就必须在执行业务前，先去获取token，服务器会把token保存到redis中。

2. 然后调用业务接口请求时，把token携带过去，一般放在请求头部。

3. 服务器判断token是否存在redis中，存在表示第一次请求，可以继续执行业务，执行业务完成后，最后需要把redis中的token删除。

4. 如果判断token不存在redis中，就表示是重复操作，直接返回重复标记给client，这样就保证了业务代码，不被重复执行。



